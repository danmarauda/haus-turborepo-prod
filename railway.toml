# =============================================================================
# Railway Configuration for Haus Platform
# =============================================================================
# This file configures Railway deployments for services in this monorepo.
#
# Environment Variables Required:
#   - RAILWAY_TOKEN: Railway API token
#   - RAILWAY_PROJECT_ID: Railway project ID
#
# Environments:
#   - production: Main production environment
#   - staging: Staging/QA environment
#   - pr-*: Preview environments for merge requests
# =============================================================================

[build]
builder = "nixpacks"
buildCommand = "bun install && bun run build"

[deploy]
healthcheckPath = "/api/health"
healthcheckTimeout = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
numReplicas = 1

# =============================================================================
# Service-Specific Configurations
# =============================================================================
# Uncomment and configure the services you want to deploy to Railway.
# Each service can have its own start command and root directory.

# Main App Service (Next.js)
# [services.app]
# rootDirectory = "apps/app"
# startCommand = "bun run start"
# healthcheckPath = "/api/health"
#
# [services.app.build]
# buildCommand = "bun run build"

# Web Marketing Site (Next.js)
# [services.web]
# rootDirectory = "apps/web"
# startCommand = "bun run start"
# healthcheckPath = "/"

# Appraisal App (Next.js)
# [services.appraisal]
# rootDirectory = "apps/appraisal"
# startCommand = "bun run start"
# healthcheckPath = "/"

# API Worker Service (if needed)
# [services.worker]
# rootDirectory = "apps/worker"
# startCommand = "bun run start"

# Redis Cache (Railway managed)
# [services.redis]
# plugin = "redis"

# PostgreSQL Database (Railway managed - if needed beyond Convex)
# [services.postgres]
# plugin = "postgresql"
